<svg xmlns="http://www.w3.org/2000/svg" width="936" height="440">
<defs><marker id="arrow-filled" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6z" style="stroke: none; fill: black;"></path></marker><marker id="arrow-open" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6" style="stroke-width: 1; fill: none; stroke: black;"></path></marker></defs><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="39" style="text-anchor: middle; alignment-baseline: central;">kernel</text></g><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="382"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="401" style="text-anchor: middle; alignment-baseline: central;">kernel</text></g><path d="M45.5,58 v324" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="79.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="348.75" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="388.5" y="39" style="text-anchor: middle; alignment-baseline: central;">atsintc</text></g><rect width="79.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="348.75" y="382"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="388.5" y="401" style="text-anchor: middle; alignment-baseline: central;">atsintc</text></g><path d="M388.5,58 v324" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="835" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="870.5" y="39" style="text-anchor: middle; alignment-baseline: central;">device</text></g><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="835" y="382"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="870.5" y="401" style="text-anchor: middle; alignment-baseline: central;">device</text></g><path d="M870.5,58 v324" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="83" style="text-anchor: middle; alignment-baseline: central;">1.register external interrupt handler </text></g><path d="M45.5,96 h343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="575" y="125" style="text-anchor: middle; alignment-baseline: central;">2.external device block queue enqueue </text></g><path d="M388.5,111 C428.5,111 428.5,144 388.5,144" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="629.5" y="159" style="text-anchor: middle; alignment-baseline: central;">3.external device interrupt </text></g><path d="M870.5,172 h-482" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="634.5" y="201" style="text-anchor: middle; alignment-baseline: central;">4.fetch task from inner external device block queue </text></g><path d="M388.5,187 C428.5,187 428.5,220 388.5,220" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="545.25" y="239" style="text-anchor: middle; alignment-baseline: central;">5.inner priority queue enqueue </text></g><path d="M388.5,225 C428.5,225 428.5,258 388.5,258" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="273" style="text-anchor: middle; alignment-baseline: central;">6.fetch task </text></g><path d="M45.5,286 h343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="545.25" y="315" style="text-anchor: middle; alignment-baseline: central;">7.inner priority queue dequeue </text></g><path d="M388.5,301 C428.5,301 428.5,334 388.5,334" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="349" style="text-anchor: middle; alignment-baseline: central;">8.return the highest priority task </text></g><path d="M388.5,362 h-343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path></svg>